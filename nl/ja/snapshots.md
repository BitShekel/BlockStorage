---

copyright:
  years: 2014, 2018
lastupdated: "2018-03-16"

---
{:new_window: target="_blank"}
{:shortdesc: .shortdesc}

# スナップショット

スナップショットは {{site.data.keyword.blockstoragefull}} の機能の 1 つです。 スナップショットは、特定の時点におけるボリュームの内容を表しています。 スナップショットを使用すると、パフォーマンスに影響を与えることなく、スペースの消費量を最小限に抑えてデータを保護できます。スナップショットは、データ保護のための第 1 の防衛線として考えられます。 スナップショット機能を使用していれば、ユーザーが重要なデータを誤って変更したり、ボリュームから削除したりした場合でも、データをスナップショット・コピーから容易に、しかも迅速に復元することができます。

{{site.data.keyword.blockstorageshort}}には、スナップショットを取得する 2 つの方法が用意されています。これには、各ストレージ・ボリュームのスナップショット・コピーを自動的に作成および削除する構成可能なスナップショット・スケジュールが含まれます。 追加のスナップショット・スケジュールの作成、コピーの手動削除、および必要に応じたスケジュールの管理も行うことができます。 もう 1 つの方法は、手動でスナップショットを取得することです。

スナップショット・コピーは、ある時点でのボリュームの状態を収集した、{{site.data.keyword.blockstorageshort}} LUN の読み取り専用イメージです。 スナップショット・コピーは、コピーの作成に必要な時間とストレージ・スペースの両方において、非常に効率的です。 {{site.data.keyword.blockstorageshort}}のスナップショット・コピーの作成には、ボリュームのサイズやストレージ上のアクティビティーのレベルに関係なく、数秒しかかかりません (一般的には 1 秒未満)。 スナップショット・コピーが作成された後、データ・オブジェクトへの変更は、まるでスナップショット・コピーが存在しないかのように、現行のオブジェクト・バージョンへの更新に反映されます。 その間、データのコピーは完全に安定した状態のままです。 

スナップショット・コピーではパフォーマンス・オーバーヘッドは発生しません。ユーザーは、1 つの{{site.data.keyword.blockstorageshort}}・ボリュームにつき最大 50 個のスケジュールされたスナップショットと 50 個の手動スナップショットを簡単に保管でき、それらのスナップショットはすべて、読み取り専用のオンライン・バージョンのデータとしてアクセス可能です。


スナップショットを使用すると、次のことができます。

- ポイント・イン・タイム・リカバリー・ポイントを中断なしに作成する。
- ボリュームを以前のポイント・イン・タイムに戻す。

ボリュームのスナップショットを取得するためには、そのボリューム用に一定量のスナップショット・スペースを購入する必要があります。 スナップショット・スペースは、初期ボリューム注文時、または初期プロビジョニング後に、**「ボリュームの詳細」**ページで**「アクション」**ドロップダウン・ボタンをクリックし、**「スナップショット・スペースの追加」**を選択することで追加できます。 注意すべき点は、スケジュールされたスナップショットと手動スナップショットがスナップショット・スペースを共有することです。したがって、その点を考慮してスペースを注文してください。 詳細およびガイダンスについては、[スナップショットの注文](ordering-snapshots.html)の項を参照してください。

## スナップショットのベスト・プラクティス

スナップショットの設計は、お客様の環境によって異なります。 以下の設計上の考慮事項は、スナップショット・コピーの計画および実装に役立ちます。 
- 	各ボリュームまたは LUN について、最大 50 個のスナップショットをスケジュールによって作成でき、最大 50 個を手動で作成できます。 
- 	過剰にスナップショットを作成しないでください。 時間単位、日単位、または週単位でスナップショットをスケジュールすることにより、スケジュールしたスナップショットの頻度でお客様の RTO および RPO のニーズとアプリケーションのビジネス要件が確実に満たされるようにしてください。 
- 	ストレージ消費量の増加を制御するには、スナップショット自動削除を使用してください。 <br/>
    **注**: 自動削除しきい値は 95% に固定されています。
    
スナップショットは、実際のオフサイト DR レプリケーションや長期保存バックアップに代わるものではないことに留意してください。
    
## スナップショット・コピーがディスク・スペースを消費する方法

スナップショット・コピーは、ファイル全体ではなく個々のブロックを保持することによって、ディスク使用量を最小化します。 スナップショット・コピーは、アクティブ・ファイル・システム内のファイルが変更または削除された場合にのみ、追加スペースの消費を開始します。 この場合でも、元のファイル・ブロックは 1 つ以上のスナップショット・コピーの一部として保持されます。
アクティブ・ファイル・システムでは、変更されたブロックはディスク上の別の場所に再書き込みされるか、アクティブ・ファイル・ブロックとして全体が削除されます。 その結果、変更されたアクティブ・ファイル・システム内のブロックによって使用されるディスク・スペースだけでなく、元のブロックによって使用されたディスク・スペースも、変更前のアクティブ・ファイル・システムの状況を反映させるために引き続き確保されます。

<table>
    <colgroup>
      <col style="width: 33.3%;"/>
      <col style="width: 33.3%;"/>
      <col style="width: 33.3%;"/>
    </colgroup>
    <tbody>
      <tr>
        <th colspan="3" style="border: 0.0px;text-align: center;">スナップショット・コピーの前と後でのディスク・スペース使用状況</th>
     </tr><tr>
        <td style="border: 0.0px;text-align: center;"><img src="/images/bfcircle1.png" alt="スナップショット・コピー前"></td>
        <td style="border: 0.0px;text-align: center;"><img src="/images/bfcircle3.png" alt="スナップショット・コピー後"></td>
        <td style="border: 0.0px;text-align: center;"><img src="/images/bfcircle2.png" alt="スナップショット・コピー後の変更"></td>
     </tr><tr>
        <td style="border: 0.0px;">スナップショット・コピーが作成される前には、ディスク・スペースはアクティブ・ファイル・システムによってのみ消費されています。</td>
        <td style="border: 0.0px;">スナップショット・コピーが作成された後では、アクティブ・ファイル・システムとスナップショット・コピーは同じディスク・ブロックを指します。 スナップショット・コピーは追加ディスク・スペースを使用しません。</td>
        <td style="border: 0.0px;">アクティブ・ファイル・システムから <i>myfile.txt</i> が削除された後も、スナップショット・コピーは引き続きそのファイルを含んでおり、そのディスク・ブロックを参照します。 このため、アクティブ・ファイル・システム・データを削除しても、必ずしもディスク・スペースが解放されるわけではありません。</td>
      </tr>
    </tbody>
</table>

スナップショット・スペースの使用量を表示するには、[スナップショットの管理](working-with-snapshots.html)という文書の説明に従ってください。






